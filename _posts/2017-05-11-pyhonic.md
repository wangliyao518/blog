---
layout: post
title: "Brief python"
description: how to write elegant and authentic python code, we need one minutes to think more
image: 'http://res.cloudinary.com/dm7h7e8xj/image/upload/v1504809708/django_g7djdj.jpg'
category: 'pyhon'
tags:
- python
- pyhonic
twitter_text: how to write pythonic code
introduction: how to write elegant and authentic python code
---



> If there's a downside to elegance, it's that you need a hard job to get it, and you need a good education to appreciate it.(如果说优雅也有缺点的话，那就是你需要艰巨的工作才能得到它，需要良好的教育才能欣赏它。)
> —— Edsger Wybe Dijkstra

## what's pythonic

什么是pythonic，就像什么是地道的汉语一样，切实存在但标准模糊。import this可以看到Tim Peters提出的Python之禅，它提供了指导思想, PEP8给出的不过是编码规范，对于实践pythonic还远远不够。整个python社区都一直有对pythonic的讨论, 本文也就是到处旁征博引, 以此自我学习和方便大家讨论,我们追求的是python的代码更加的地道

Vivamus sagittis lacus vel augue rutrum faucibus dolor auctor. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.Throughout the python community, there has been a discussion of pythonic, and this article is a place where you can learn and talk about it, and we're looking for a more authentic python code.

## traversal

bad code
```python
for i in [0,1,2,3,4,5]:
    printi ** 2

for i in range(6):
    printi ** 2

```
good code, use xrange
```python
for i in xrange(6):
    printi ** 2
```
xrange会返回一个迭代器，用来一次一个值地遍历一个范围。这种方式会比range更省内存。xrange在Python 3中已经改名为range。


bad code
```python
colors = ['red', 'green', 'blue', 'yellow']
for i in range(len(colors)):
    print colors[i]
```

good code
```python
for color in colors:
    print color
```

bad code
```python
colors = ['red', 'green', 'blue', 'yellow']
for i in range(len(colors)-1, -1, -1):
    print colors[i]
```

good code
```python
for color in reversed(colors):
    print color
```

bad code
```python
colors = ['red', 'green', 'blue', 'yellow']
for i inrange(len(colors)):
    print i, '--->',colors[i]
```

good code
```python
for i, color in enumerate(colors):
    print i, '--->',color
```


- traverse two list
bad code 
```python
names= ['raymond','rachel','matthew']
colors= ['red','green','blue','yellow']
n= min(len(names),len(colors))
for i inrange(n):
    print names[i],'--->',colors[i]
for name, color in zip(names, colors):
    print name,'--->',color
```

good code
```python
for name, color in izip(names,colors):
    print name,'--->',color
```

zip在内存中生成一个新的列表，需要更多的内存。izip比zip效率更高。

注意：在Python 3中，izip改名为zip，并替换了原来的zip成为内置函数。


bad code
```python
blocks = []
while True:
    block= f.read(32)
    if block== '':
        break
    blocks.append(block)
      
```

good code
```python
blocks= []
for block in iter(partial(f.read, 32), ''):
    blocks.append(block)
```

iter接受两个参数。第一个是你反复调用的函数，第二个是标记值。

这个例子里不太能看出来方法二的优势，甚至觉得partial让代码可读性更差了。方法二的优势在于iter的返回值是个迭代器，迭代器能用在各种地方，set，sorted，min，max，heapq，sum……



bad code
```python
def find(seq, target):
    found= False
    for i, value in enumerate(seq):
        if value == target:
            found = True
            break
            return i
    if not found:
        return -1
    
```

good code
```python
def find(seq, target):
    for i, value in enumerate(seq):
        if value == target:
            break
            return i
    else:
        return -1

```

bad code
```python
for k in d:
    print k,'--->',d[k]
# 产生一个很大的列表
for k, vin d.items():
    print k, '--->', v
```

good code
```python
for k,v in d.iteritems():
    print k,'--->',v
```
iteritems()更好是因为它返回了一个迭代器。

注意：Python 3已经没有iteritems()了，items()的行为和iteritems()很接近。




-----


Want to see something else added? <a href="https://github.com/wangliyao518/blog/issues/new">Open an issue.</a>
